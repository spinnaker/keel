apply plugin: "java-library"
apply plugin: "kotlin-spring"
apply from: "$rootDir/gradle/junit4.gradle"
apply from: "$rootDir/gradle/junit5.gradle"

dependencies {
  api project(":keel-api")
  implementation project(":keel-common")
  implementation "com.netflix.spinnaker.kork:kork-core:2.+"
  implementation("io.kubernetes:client-java:3.0.0")
  implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:+")
  implementation "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:[2.9.6,)"
  implementation "com.fasterxml.jackson.module:jackson-module-kotlin:[2.9.6,)"
  implementation "com.fasterxml.jackson.datatype:jackson-datatype-jsr310:[2.9.6,)"
  implementation "com.fasterxml.jackson.datatype:jackson-datatype-joda:[2.9.6,)"

  testImplementation "org.springframework.boot:spring-boot-starter-web:$bootVersion"
  testImplementation "org.springframework.boot:spring-boot-starter-test:$bootVersion"
  testImplementation "com.oneeyedmen:minutest:+"
  testImplementation "io.strikt:strikt-core:+"
}

test {
//  dependsOn("minikubeStart")
//  finalizedBy("minikubeStop")
  useJUnitPlatform {
    includeEngines "junit-jupiter", "junit-vintage"
  }
}
