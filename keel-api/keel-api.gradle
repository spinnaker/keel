apply plugin: "java-library"
apply plugin: "kotlin-spring"
apply from: "$rootDir/gradle/junit5.gradle"
apply plugin: "application"

dependencies {
  api project(":keel-core")
  api project(":keel-plugin")
  // do not commit this line
  implementation project(":keel-file-plugin")
  implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:+"
  implementation "com.netflix.spinnaker.kork:kork-core:2.+"
//  implementation "com.netflix.spinnaker.keiko:keiko-redis-spring:+"
  implementation "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml"
  implementation "com.fasterxml.jackson.module:jackson-module-kotlin"
  implementation "org.springframework.boot:spring-boot-starter-actuator"
  implementation "org.springframework.boot:spring-boot-starter-web"

  testImplementation "io.strikt:strikt-core:+"
  testImplementation project(":keel-spring-test-support")
  testImplementation project(":keel-core-test")
  testImplementation(project(":keel-ec2")) {
    because("want access to real protos to test conversion between model & proto")
  }
}

test {
  useJUnitPlatform {
    includeEngines "junit-jupiter", "junit-vintage"
  }
}
mainClassName = "com.netflix.spinnaker.keel.MainKt"
