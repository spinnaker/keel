databaseChangeLog:
- changeSet:
    id: create-bake-history-table
    author: fletch
    changes:
    - createTable:
        tableName: bake_history
        columns:
        - column:
            name: app_version
            type: varchar(255)
            constraints:
              nullable: false
        - column:
            name: base_ami_version
            type: varchar(255)
            constraints:
              nullable: false
        - column:
            name: regions
            type: varchar(255)
            constraints:
              nullable: false
        - column:
            name: task_id
            type: varchar(255)
            constraints:
              nullable: false
        - column:
            name: launched_at
            type: timestamp(3)
            constraints:
              nullable: false
    - modifySql:
        dbms: mysql
        append:
          value: " engine innodb"
    rollback:
    - dropTable:
        tableName: bake_history

- changeSet:
    id: create-bake-history-indicies
    author: fletch
    changes:
    - createIndex:
        indexName: bake_history_app_version_base_ami_version_idx
        tableName: bake_history
        columns:
        - column:
            name: app_version
        - column:
            name: base_ami_version
    rollback:
    - dropIndex:
        indexName: bake_history_app_version_base_ami_version_idx
        tableName: bake_history
