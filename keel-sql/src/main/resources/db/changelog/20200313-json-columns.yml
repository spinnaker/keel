databaseChangeLog:
  - changeSet:
      id: json-columns
      author: lpollo
      changes:
        - modifyDataType:
            tableName: delivery_artifact
            columnName: details
            newDataType: json
        - modifyDataType:
            tableName: environment
            columnName: constraints
            newDataType: json
        - modifyDataType:
            tableName: environment
            columnName: notifications
            newDataType: json
        - modifyDataType:
            tableName: environment_artifact_constraint
            columnName: attributes
            newDataType: json
        - modifyDataType:
            tableName: event
            columnName: json
            newDataType: json
        - modifyDataType:
            tableName: resource
            columnName: spec
            newDataType: json
        - modifyDataType:
            tableName: resource
            columnName: metadata
            newDataType: json

      rollback:
        - modifyDataType:
            tableName: delivery_artifact
            columnName: details
            newDataType: longtext
        - modifyDataType:
            tableName: environment
            columnName: constraints
            newDataType: longtext
        - modifyDataType:
            tableName: environment
            columnName: notifications
            newDataType: longtext
        - modifyDataType:
            tableName: environment_artifact_constraint
            columnName: attributes
            newDataType: longtext
        - modifyDataType:
            tableName: event
            columnName: json
            newDataType: longtext
        - modifyDataType:
            tableName: resource
            columnName: spec
            newDataType: longtext
        - modifyDataType:
            tableName: resource
            columnName: metadata
            newDataType: longtext
