databaseChangeLog:
  - changeSet:
      id: long-date-sizes-linux-java-17
      author: jasonmcintosh
      changes:
        - dropColumn:
            tableName: dismissible_notification
            columnName: triggered_at
        - sql:
            sql: |
              alter table dismissible_notification
              add column triggered_at datetime(6) generated always as (str_to_date(json->>'$.triggeredAt', '%Y-%m-%dT%T.%fZ'))
              after uid;
        - dropColumn:
            tableName: dismissible_notification
            columnName: dismissed_at
        - sql:
            sql: |
              alter table dismissible_notification
              add column dismissed_at datetime(6) generated always as (str_to_date(json->>'$.dismissedAt', '%Y-%m-%dT%T.%fZ'))
              after dismissed_by;
