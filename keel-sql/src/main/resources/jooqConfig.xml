<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<configuration xmlns="http://www.jooq.org/xsd/jooq-codegen-3.13.0.xsd">
  <jdbc>
    <driver>com.mysql.cj.jdbc.Driver</driver>
    <url>jdbc:mysql://127.0.0.1:6603/keel?useSSL=false&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</url>
    <user>root</user>
    <password>sa</password>
  </jdbc>
  <logging>WARN</logging>
  <generator>
    <database>
      <name>org.jooq.meta.mysql.MySQLDatabase</name>
      <inputSchema>keel</inputSchema>
      <excludes>
        DATABASECHANGELOG
        | DATABASECHANGELOGLOCK
      </excludes>
      <forcedTypes>
        <!-- JSON columns -->
        <forcedType>
          <userType>com.netflix.spinnaker.keel.api.artifacts.GitMetadata</userType>
          <converter>com.netflix.spinnaker.jooq.GitMetadataConverter</converter>
          <includeExpression>ARTIFACT_VERSIONS\\.GIT_METADATA</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.api.artifacts.BuildMetadata</userType>
          <converter>com.netflix.spinnaker.jooq.BuildMetadataConverter</converter>
          <includeExpression>ARTIFACT_VERSIONS\\.BUILD_METADATA</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.lifecycle.LifecycleEvent</userType>
          <converter>com.netflix.spinnaker.jooq.LifecycleEventConverter</converter>
          <includeExpression>LIFECYCLE_EVENT\\.JSON</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.events.PersistentEvent</userType>
          <converter>com.netflix.spinnaker.jooq.PersistentEventConverter</converter>
          <includeExpression>EVENT\\.JSON</includeExpression>
        </forcedType>
        <forcedType>
          <userType><![CDATA[java.util.Map<String, ?>]]></userType>
          <converter>com.netflix.spinnaker.jooq.JsonToMapConverter</converter>
          <includeExpression>(DELIVERY_CONFIG|ACTION_STATE)\\.METADATA</includeExpression>
        </forcedType>
        <!-- Automatically convert remaining JSON columns to String -->
        <forcedType>
          <name>LONGVARCHAR</name>
          <includeTypes>JSON</includeTypes>
        </forcedType>
        <!-- Use Instant rather than LocalDateTime for TIMESTAMP columns -->
        <forcedType>
          <userType>java.time.Instant</userType>
          <includeTypes>TIMESTAMP</includeTypes>
          <converter>com.netflix.spinnaker.jooq.LocalDateTimeToInstantConverter</converter>
        </forcedType>
        <forcedType>
          <userType>java.time.Instant</userType>
          <includeTypes>DATETIME</includeTypes>
          <converter>com.netflix.spinnaker.jooq.LocalDateTimeToInstantConverter</converter>
        </forcedType>
        <!-- Enums -->
        <forcedType>
          <userType>com.netflix.spinnaker.keel.api.artifacts.ArtifactStatus</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>ARTIFACT_VERSIONS\\.RELEASE_STATUS</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.api.constraints.ConstraintStatus</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>ENVIRONMENT_ARTIFACT_CONSTRAINT\\.STATUS</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.core.api.PromotionStatus</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>ENVIRONMENT_ARTIFACT_VERSIONS\\.PROMOTION_STATUS</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.events.PersistentEvent.EventScope</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>EVENT\\.SCOPE</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.lifecycle.LifecycleEventType</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>(LIFECYCLE_EVENT|LIFECYCLE_MONITOR)\\.TYPE</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.lifecycle.LifecycleEventStatus</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>LIFECYCLE_EVENT\\.STATUS</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.notifications.NotificationScope</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>NOTIFICATION\\.SCOPE</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.notifications.NotificationType</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>NOTIFICATION\\.TYPE</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.pause.PauseScope</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>PAUSED\\.SCOPE</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.api.constraints.ConstraintStatus</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>ACTION_STATE\\.STATUS</includeExpression>
        </forcedType>
        <forcedType>
          <userType>com.netflix.spinnaker.keel.api.action.ActionType</userType>
          <enumConverter>true</enumConverter>
          <includeExpression>ACTION_STATE\\.TYPE</includeExpression>
        </forcedType>
      </forcedTypes>
    </database>
    <target>
      <packageName>com.netflix.spinnaker.keel.persistence.metamodel</packageName>
      <!-- tokenized by gradle's processResources task -->
      <directory>$projectDir/src/generated/java</directory>
    </target>
    <generate>
      <javaTimeTypes>true</javaTimeTypes>

      <generatedAnnotation>true</generatedAnnotation>
      <generatedAnnotationType>DETECT_FROM_JDK</generatedAnnotationType>

      <nullableAnnotation>true</nullableAnnotation>
      <nullableAnnotationType>javax.annotation.Nullable</nullableAnnotationType>
      <nonnullAnnotation>true</nonnullAnnotation>
      <nonnullAnnotationType>javax.annotation.Nonnull</nonnullAnnotationType>
    </generate>
  </generator>
</configuration>
